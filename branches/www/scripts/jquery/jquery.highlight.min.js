$.fn.highlight=function(f){doHighlight=function(a,b){highlightStartTag="<span class=highlight>";highlightEndTag="</span>";var c="";var i=-1;var d=b.toLowerCase();var e=a.toLowerCase();while(a.length>0){i=e.indexOf(d,i+1);if(i<0){c+=a;a=""}else{if(a.lastIndexOf(">",i)>=a.lastIndexOf("<",i)){if(e.lastIndexOf("/script>",i)>=e.lastIndexOf("<script",i)){c+=a.substring(0,i)+highlightStartTag+a.substr(i,b.length)+highlightEndTag;a=a.substr(i+b.length);e=a.toLowerCase();i=-1}}}}return c};$(this).each(function(){$(this).html(doHighlight($(this).html(),f))});return this};